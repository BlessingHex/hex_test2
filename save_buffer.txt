cmake_minimum_required(VERSION 3.22.1)  # CMake version check

project(test VERSION 1.0)

# specify the C++ standard
set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED True)

set_property(DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR} PROPERTY VS_STARTUP_PROJECT ${PROJECT_NAME})

# Add main.cpp file of project root directory as source file
set(SOURCE_FILES main.cpp)

# Specify include directories
include_directories(
  ${CMAKE_SOURCE_DIR}/install/mavsdk/include/mavsdk
  ${CMAKE_SOURCE_DIR}/install/sdlsdk/sdl
)

# Platform specific library linking
if (WIN32)

    message("Window mavsdk find")
    
    # Add executable target with source files listed in SOURCE_FILES variable
    add_executable(test WIN32 ${SOURCE_FILES})

    # Specify your app's executable name and a list of linked libraries
    target_link_libraries(test
        # ... any other linked libraries
        ${CMAKE_SOURCE_DIR}/install/mavsdk/lib/mavsdk.lib
        ${CMAKE_SOURCE_DIR}/install/sdlsdk/sdl/SDL2d.lib
    )

    message("Finished in windows!")

endif(WIN32)

if (UNIX)

    message("Unix mavsdk find")

    # Add executable target with source files listed in SOURCE_FILES variable
    add_executable(test ${SOURCE_FILES})

    # Specify your app's executable name and a list of linked libraries
    target_link_libraries(test
        # ... any other linked libraries
        ${CMAKE_SOURCE_DIR}/install/mavsdk/lib/libmavsdk.so
	    ${CMAKE_SOURCE_DIR}/install/sdlsdk/sdl/libSDL2d.so
    )

endif(UNIX)
